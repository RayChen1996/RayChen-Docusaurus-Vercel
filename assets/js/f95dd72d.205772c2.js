"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2585],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>d});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),u=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},m=function(e){var n=u(e.components);return r.createElement(i.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),p=u(t),d=o,f=p["".concat(i,".").concat(d)]||p[d]||s[d]||a;return t?r.createElement(f,l(l({ref:n},m),{},{components:t})):r.createElement(f,l({ref:n},m))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=p;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c.mdxType="string"==typeof e?e:o,l[1]=c;for(var u=2;u<a;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3444:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>s,frontMatter:()=>a,metadata:()=>c,toc:()=>u});var r=t(7462),o=(t(7294),t(3905));const a={title:"ZOD"},l=void 0,c={unversionedId:"JS\u5957\u4ef6/zod",id:"JS\u5957\u4ef6/zod",title:"ZOD",description:"\u5047\u8a2d API \u63d0\u4f9b\u4ee5\u4e0b\u7684\u8cc7\u6599\u7d50\u69cb\uff1a",source:"@site/docs\\JS\u5957\u4ef6\\zod.md",sourceDirName:"JS\u5957\u4ef6",slug:"/JS\u5957\u4ef6/zod",permalink:"/docs/JS\u5957\u4ef6/zod",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/JS\u5957\u4ef6/zod.md",tags:[],version:"current",frontMatter:{title:"ZOD"},sidebar:"tutorialSidebar",previous:{title:"use-debounce",permalink:"/docs/JS\u5957\u4ef6/use-debounce"},next:{title:"Zustand",permalink:"/docs/JS\u5957\u4ef6/zustand"}},i={},u=[],m={toc:u};function s(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u5047\u8a2d API \u63d0\u4f9b\u4ee5\u4e0b\u7684\u8cc7\u6599\u7d50\u69cb\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "id": 1,\n    "memberId": 1,\n    "items": [\n      {\n        "productId": 3,\n        "quantity": 1\n      }\n    ]\n  },\n  {\n    "id": 2,\n    "memberId": 2,\n    "items": [\n      {\n        "productId": 4,\n        "quantity": 2\n      },\n      {\n        "productId": 5,\n        "quantity": 1\n      }\n    ]\n  }\n]\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import { useForm, Controller } from "react-hook-form";\n\nconst { control, handleSubmit } = useForm();\n\n<Controller\n  control={control}\n  name={`items.${index}.quantity`} // \u5c0d\u61c9\u9663\u5217\u7684\u7d22\u5f15\n  render={({ field }) => <input {...field} type="number" placeholder="\u6578\u91cf" />}\n/>;\n')),(0,o.kt)("h1",{id:"\u4f7f\u7528-zod-\u9a57\u8b49\u7d50\u69cb"},"\u4f7f\u7528 ZOD \u9a57\u8b49\u7d50\u69cb"),(0,o.kt)("p",null,"\u5b9a\u7fa9 Schema"),(0,o.kt)("p",null,"\u4f7f\u7528 ZOD \u5b9a\u7fa9\u8cc7\u6599\u7d50\u69cb\u7684\u9a57\u8b49\u898f\u5247\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { z } from "zod";\n\nconst itemSchema = z.object({\n  productId: z.number(),\n  quantity: z.number().min(1, "\u6578\u91cf\u5fc5\u9808\u81f3\u5c11\u70ba 1"),\n});\n\nconst formSchema = z.object({\n  items: z.array(itemSchema),\n});\n')),(0,o.kt)("h1",{id:"\u7d50\u5408-react-hook-form-\u548c-zod"},"\u7d50\u5408 react-hook-form \u548c ZOD"),(0,o.kt)("p",null,"\u914d\u5408 ",(0,o.kt)("inlineCode",{parentName:"p"},"zodResolver")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"useForm"),"\uff0c\u5c07 Schema \u61c9\u7528\u5230\u8868\u55ae\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { zodResolver } from "@hookform/resolvers/zod";\n\nconst { control, handleSubmit } = useForm({\n  resolver: zodResolver(formSchema),\n  defaultValues: {\n    items: data[0].items, // \u521d\u59cb\u5316\u7b2c\u4e00\u7b46\u8cc7\u6599\n  },\n});\n\nconst onSubmit = (values) => {\n  console.log(values);\n};\n')),(0,o.kt)("p",null,"\u4ee5\u4e0b\u662f\u6574\u5408 react-hook-form \u8207 ZOD \u7684\u5b8c\u6574\u7a0b\u5f0f\u78bc\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from "react";\nimport { useForm, Controller } from "react-hook-form";\nimport { zodResolver } from "@hookform/resolvers/zod";\nimport { z } from "zod";\n\nconst itemSchema = z.object({\n  productId: z.number(),\n  quantity: z.number().min(1, "\u6578\u91cf\u5fc5\u9808\u81f3\u5c11\u70ba 1"),\n});\n\nconst formSchema = z.object({\n  items: z.array(itemSchema),\n});\n\nconst App = () => {\n  const { control, handleSubmit } = useForm({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      items: [\n        { productId: 3, quantity: 1 },\n        { productId: 4, quantity: 2 },\n      ],\n    },\n  });\n\n  const onSubmit = (values) => {\n    console.log(values);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      {Array(2)\n        .fill(0)\n        .map((_, index) => (\n          <Controller\n            key={index}\n            control={control}\n            name={`items.${index}.quantity`}\n            render={({ field }) => (\n              <input\n                {...field}\n                type="number"\n                placeholder={`\u6578\u91cf ${index + 1}`}\n              />\n            )}\n          />\n        ))}\n      <button type="submit">\u63d0\u4ea4</button>\n    </form>\n  );\n};\n\nexport default App;\n')))}s.isMDXComponent=!0}}]);